{"ast":null,"code":"import _slicedToArray from\"D:\\\\Documents\\\\Field-Benders-Website-Re\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{AppBar,Typography,Toolbar,Avatar,Button,Icon,IconButton}from'@material-ui/core';import{Link,useHistory,useLocation}from'react-router-dom';import{useDispatch}from'react-redux';import decode from'jwt-decode';import jfacLogo from'../../assets/img/logo/JFAC-logo.png';import fieldBendersLogo from'../../assets/img/logo/field_benders_logo.png';import*as actionType from'../../constants/actionTypes';import useStyles from'./styles';import'./appbar.css';var Navbar=function Navbar(props){var _useState=useState(JSON.parse(localStorage.getItem('profile'))),_useState2=_slicedToArray(_useState,2),user=_useState2[0],setUser=_useState2[1];var dispatch=useDispatch();var location=useLocation();var history=useHistory();var classes=useStyles();var logout=function logout(){dispatch({type:actionType.LOGOUT});history.push('/auth');setUser(null);};useEffect(function(){var token=user===null||user===void 0?void 0:user.token;if(token){var decodedToken=decode(token);if(decodedToken.exp*1000<new Date().getTime())logout();}setUser(JSON.parse(localStorage.getItem('profile')));},[location]);return/*#__PURE__*/React.createElement(AppBar,{className:\"\".concat(classes.appBar,\" appbar\"),position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(Link,{to:\"/\"},/*#__PURE__*/React.createElement(\"img\",{className:classes.image,component:Link,to:\"/home\",src:fieldBendersLogo,alt:\"icon\",height:\"40px\"})),/*#__PURE__*/React.createElement(Button,{className:classes.brandContainer,component:Link,to:\"/chapters\"},\"chapters\"),/*#__PURE__*/React.createElement(Button,{className:classes.brandContainer,component:Link,to:\"/archive\"},\"the_archive\"),/*#__PURE__*/React.createElement(Button,{className:classes.brandContainer,component:Link,to:\"/about\"},\"about\"),/*#__PURE__*/React.createElement(Button,{className:classes.brandContainer,component:Link,to:\"/gallery\"},\"Gallery\"),window.location.href.match(\"((chapter):*\\d)\")==true?/*#__PURE__*/React.createElement(Button,null,\"Otherwise we don't show a thing\"):/*#__PURE__*/React.createElement(Typography,null,\"Control Panel if we're reading\"),/*#__PURE__*/React.createElement(Toolbar,{className:classes.toolbar},(user===null||user===void 0?void 0:user.result)?/*#__PURE__*/React.createElement(\"div\",{className:classes.profile},/*#__PURE__*/React.createElement(Avatar,{className:classes.purple,alt:user===null||user===void 0?void 0:user.result.name,src:user===null||user===void 0?void 0:user.result.imageUrl},user===null||user===void 0?void 0:user.result.name.charAt(0)),/*#__PURE__*/React.createElement(Typography,{className:classes.userName,variant:\"h6\"},user===null||user===void 0?void 0:user.result.name),/*#__PURE__*/React.createElement(Button,{variant:\"contained\",className:classes.logout,color:\"secondary\",onClick:logout},\"Logout\")):/*#__PURE__*/React.createElement(Button,{component:Link,to:\"/auth\",variant:\"contained\",color:\"primary\"},\"Sign In\")));};export default Navbar;/**\r\n *    \r\n *    <Link to=\"/\" className={classes.image}>\r\n        <img component={Link} to=\"/\" src={fieldBendersLogo} alt=\"icon\" height=\"100px\" />\r\n      </Link>\r\n      <Link to=\"/chapters\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/chapters\">chapters</Button>\r\n      </Link>\r\n      <Link to=\"/archive\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/archive\">the_archive</Button>\r\n      </Link>\r\n      <Link to=\"/about\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/about\">about</Button>\r\n      </Link>\r\n      <Link to=\"/gallery\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/gallery\">about</Button>\r\n      </Link>\r\n */","map":{"version":3,"names":["React","useState","useEffect","AppBar","Typography","Toolbar","Avatar","Button","Icon","IconButton","Link","useHistory","useLocation","useDispatch","decode","jfacLogo","fieldBendersLogo","actionType","useStyles","Navbar","props","JSON","parse","localStorage","getItem","user","setUser","dispatch","location","history","classes","logout","type","LOGOUT","push","token","decodedToken","exp","Date","getTime","appBar","image","brandContainer","window","href","match","toolbar","result","profile","purple","name","imageUrl","charAt","userName"],"sources":["D:/Documents/Field-Benders-Website-Re/client/src/components/Navbar/Navbar.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { AppBar, Typography, Toolbar, Avatar, Button, Icon, IconButton } from '@material-ui/core';\r\nimport { Link, useHistory, useLocation } from 'react-router-dom';\r\nimport { useDispatch } from 'react-redux';\r\nimport decode from 'jwt-decode';\r\n\r\nimport jfacLogo from '../../assets/img/logo/JFAC-logo.png';\r\nimport fieldBendersLogo from '../../assets/img/logo/field_benders_logo.png';\r\nimport * as actionType from '../../constants/actionTypes';\r\nimport useStyles from './styles';\r\nimport './appbar.css';\r\n\r\nconst Navbar = (props) => {\r\n  const [user, setUser] = useState(JSON.parse(localStorage.getItem('profile')));\r\n  \r\n  const dispatch = useDispatch();\r\n  const location = useLocation();\r\n  const history = useHistory();\r\n  const classes = useStyles();\r\n\r\n  const logout = () => {\r\n    dispatch({ type: actionType.LOGOUT });\r\n\r\n    history.push('/auth');\r\n\r\n    setUser(null);\r\n  };\r\n\r\n  \r\n\r\n  useEffect(() => {\r\n    const token = user?.token;\r\n\r\n    if (token) {\r\n      const decodedToken = decode(token);\r\n\r\n      if (decodedToken.exp * 1000 < new Date().getTime()) logout();\r\n    }\r\n\r\n    setUser(JSON.parse(localStorage.getItem('profile')));\r\n  }, [location]);\r\n\r\n  return (\r\n    <AppBar className={`${classes.appBar} appbar`} position=\"static\" color=\"inherit\">\r\n      <Link to=\"/\">\r\n        <img className = {classes.image} component={Link} to=\"/home\" src={fieldBendersLogo} alt=\"icon\" height=\"40px\" />\r\n      </Link>\r\n\r\n      \r\n      <Button className={classes.brandContainer} component={Link} to=\"/chapters\">chapters</Button>\r\n      <Button className={classes.brandContainer} component={Link} to=\"/archive\">the_archive</Button>\r\n      <Button className={classes.brandContainer} component={Link} to=\"/about\">about</Button>\r\n      <Button className={classes.brandContainer} component={Link} to=\"/gallery\">Gallery</Button>\r\n\r\n      \r\n      {window.location.href.match(\"((chapter):*\\d)\")==true ? (\r\n        <Button>Otherwise we don't show a thing</Button>\r\n      ) : (\r\n        <Typography>Control Panel if we're reading</Typography>\r\n      )\r\n         \r\n        \r\n      }\r\n      <Toolbar className={classes.toolbar}>\r\n        {user?.result ? (\r\n          <div className={classes.profile}>\r\n            <Avatar className={classes.purple} alt={user?.result.name} src={user?.result.imageUrl}>{user?.result.name.charAt(0)}</Avatar>\r\n            <Typography className={classes.userName} variant=\"h6\">{user?.result.name}</Typography>\r\n            <Button variant=\"contained\" className={classes.logout} color=\"secondary\" onClick={logout}>Logout</Button>\r\n          </div>\r\n        ) : (\r\n          <Button component={Link} to=\"/auth\" variant=\"contained\" color=\"primary\">Sign In</Button>\r\n        )}\r\n      </Toolbar>\r\n    </AppBar>\r\n  );\r\n};\r\n\r\nexport default Navbar;\r\n\r\n/**\r\n *    \r\n *    <Link to=\"/\" className={classes.image}>\r\n        <img component={Link} to=\"/\" src={fieldBendersLogo} alt=\"icon\" height=\"100px\" />\r\n      </Link>\r\n      <Link to=\"/chapters\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/chapters\">chapters</Button>\r\n      </Link>\r\n      <Link to=\"/archive\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/archive\">the_archive</Button>\r\n      </Link>\r\n      <Link to=\"/about\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/about\">about</Button>\r\n      </Link>\r\n      <Link to=\"/gallery\" className={classes.brandContainer}>\r\n        <Button component={Link} to=\"/gallery\">about</Button>\r\n      </Link>\r\n */"],"mappings":"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"},"metadata":{},"sourceType":"module"}