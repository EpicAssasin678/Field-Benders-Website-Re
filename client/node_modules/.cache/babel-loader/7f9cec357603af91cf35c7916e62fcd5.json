{"ast":null,"code":"import _toConsumableArray from\"D:\\\\Documents\\\\Field-Benders-Website-Re\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";import _slicedToArray from\"D:\\\\Documents\\\\Field-Benders-Website-Re\\\\client\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState}from'react';import{Container,Grow,Grid,AppBar,TextField,Button,Paper}from'@material-ui/core';import{useDispatch}from'react-redux';import{useHistory,useLocation}from'react-router-dom';import ChipInput from'material-ui-chip-input';import{getPostsBySearch}from'../../actions/posts';import Posts from'../Posts/Posts';import Form from'../Form/Form';import Pagination from'../Pagination';import useStyles from'./styles';import'./gallery.css';function useQuery(){return new URLSearchParams(useLocation().search);}var Gallery=function Gallery(){var classes=useStyles();var query=useQuery();var page=query.get('page')||1;var searchQuery=query.get('searchQuery');var _useState=useState(0),_useState2=_slicedToArray(_useState,2),currentId=_useState2[0],setCurrentId=_useState2[1];var dispatch=useDispatch();var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),search=_useState4[0],setSearch=_useState4[1];var _useState5=useState([]),_useState6=_slicedToArray(_useState5,2),tags=_useState6[0],setTags=_useState6[1];var history=useHistory();var searchPost=function searchPost(){console.log('searchpost called');if(search.trim()||tags){dispatch(getPostsBySearch({search:search,tags:tags.join(',')}));history.push(\"/posts/search?searchQuery=\".concat(search||'none',\"&tags=\").concat(tags.join(',')));}else{history.push('/');}};var handleKeyPress=function handleKeyPress(e){if(e.keyCode===13){searchPost();}};var handleAddChip=function handleAddChip(tag){return setTags([].concat(_toConsumableArray(tags),[tag]));};var handleDeleteChip=function handleDeleteChip(chipToDelete){return setTags(tags.filter(function(tag){return tag!==chipToDelete;}));};console.log(searchQuery);return/*#__PURE__*/React.createElement(Grow,{in:true},/*#__PURE__*/React.createElement(Container,{maxWidth:\"xl\"},/*#__PURE__*/React.createElement(Grid,{container:true,justify:\"space-between\",alignItems:\"stretch\",spacing:3,className:classes.gridContainer},/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:9},/*#__PURE__*/React.createElement(Posts,{setCurrentId:setCurrentId})),/*#__PURE__*/React.createElement(Grid,{item:true,xs:12,sm:6,md:3},/*#__PURE__*/React.createElement(AppBar,{className:classes.appBarSearch,position:\"static\",color:\"inherit\"},/*#__PURE__*/React.createElement(TextField,{onKeyDown:handleKeyPress,name:\"search\",variant:\"outlined\",label:\"Search Gallery\",fullWidth:true,value:search,onChange:function onChange(e){return setSearch(e.target.value);}}),/*#__PURE__*/React.createElement(ChipInput,{style:{margin:'10px 0'},value:tags,onAdd:function onAdd(chip){return handleAddChip(chip);},onDelete:function onDelete(chip){return handleDeleteChip(chip);},label:\"Search Tags\",variant:\"outlined\"}),/*#__PURE__*/React.createElement(Button,{onClick:searchPost,className:classes.searchButton,variant:\"contained\",color:\"primary\"},\"Search\")),/*#__PURE__*/React.createElement(Form,{currentId:currentId,setCurrentId:setCurrentId}),!searchQuery&&!tags.length&&/*#__PURE__*/React.createElement(Paper,{className:classes.pagination,elevation:6},/*#__PURE__*/React.createElement(Pagination,{page:page}))))));};export default Gallery;","map":{"version":3,"names":["React","useState","Container","Grow","Grid","AppBar","TextField","Button","Paper","useDispatch","useHistory","useLocation","ChipInput","getPostsBySearch","Posts","Form","Pagination","useStyles","useQuery","URLSearchParams","search","Gallery","classes","query","page","get","searchQuery","currentId","setCurrentId","dispatch","setSearch","tags","setTags","history","searchPost","console","log","trim","join","push","handleKeyPress","e","keyCode","handleAddChip","tag","handleDeleteChip","chipToDelete","filter","gridContainer","appBarSearch","target","value","margin","chip","searchButton","length","pagination"],"sources":["D:/Documents/Field-Benders-Website-Re/client/src/components/Gallery/Gallery.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Container, Grow, Grid, AppBar, TextField, Button, Paper } from '@material-ui/core';\r\nimport { useDispatch } from 'react-redux';\r\nimport { useHistory, useLocation } from 'react-router-dom';\r\nimport ChipInput from 'material-ui-chip-input';\r\n\r\nimport { getPostsBySearch } from '../../actions/posts';\r\nimport Posts from '../Posts/Posts';\r\nimport Form from '../Form/Form';\r\nimport Pagination from '../Pagination';\r\nimport useStyles from './styles';\r\n\r\nimport './gallery.css';\r\n\r\nfunction useQuery() {\r\n  return new URLSearchParams(useLocation().search);\r\n}\r\n\r\nconst Gallery = () => {\r\n  const classes = useStyles();\r\n  const query = useQuery();\r\n  const page = query.get('page') || 1;\r\n  const searchQuery = query.get('searchQuery');\r\n\r\n  const [currentId, setCurrentId] = useState(0);\r\n  const dispatch = useDispatch();\r\n\r\n  const [search, setSearch] = useState('');\r\n  const [tags, setTags] = useState([]);\r\n  const history = useHistory();\r\n\r\n  const searchPost = () => {\r\n    console.log('searchpost called');\r\n    if (search.trim() || tags) {\r\n      dispatch(getPostsBySearch({ search, tags: tags.join(',') }));\r\n      history.push(`/posts/search?searchQuery=${search || 'none'}&tags=${tags.join(',')}`);\r\n    } else {\r\n      history.push('/');\r\n    }\r\n  };\r\n\r\n  const handleKeyPress = (e) => {\r\n    if (e.keyCode === 13) {\r\n      searchPost();\r\n    }\r\n  };\r\n\r\n  const handleAddChip = (tag) => setTags([...tags, tag]);\r\n\r\n  const handleDeleteChip = (chipToDelete) => setTags(tags.filter((tag) => tag !== chipToDelete));\r\n\r\n  console.log(searchQuery);\r\n  return (\r\n    <Grow in>\r\n      <Container maxWidth=\"xl\">\r\n        <Grid container justify=\"space-between\" alignItems=\"stretch\" spacing={3} className={classes.gridContainer}>\r\n          <Grid item xs={12} sm={6} md={9}>\r\n            <Posts setCurrentId={setCurrentId} />\r\n          </Grid>\r\n          <Grid item xs={12} sm={6} md={3}>\r\n            <AppBar className={classes.appBarSearch} position=\"static\" color=\"inherit\">\r\n              <TextField onKeyDown={handleKeyPress} name=\"search\" variant=\"outlined\" label=\"Search Gallery\" fullWidth value={search} onChange={(e) => setSearch(e.target.value)} />\r\n              <ChipInput\r\n                style={{ margin: '10px 0' }}\r\n                value={tags}\r\n                onAdd={(chip) => handleAddChip(chip)}\r\n                onDelete={(chip) => handleDeleteChip(chip)}\r\n                label=\"Search Tags\"\r\n                variant=\"outlined\"\r\n              />\r\n              <Button onClick={searchPost} className={classes.searchButton} variant=\"contained\" color=\"primary\">Search</Button>\r\n            </AppBar>\r\n            <Form currentId={currentId} setCurrentId={setCurrentId} />\r\n            {(!searchQuery && !tags.length) && (\r\n              <Paper className={classes.pagination} elevation={6}>\r\n                <Pagination page={page} />\r\n              </Paper>\r\n            )}\r\n          </Grid>\r\n        </Grid>\r\n      </Container>\r\n    </Grow>\r\n  );\r\n};\r\n\r\nexport default Gallery;\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}